<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phương thức thanh toán</title>

    <!-- Bootstrap + Icon -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- CSS riêng -->
    <link rel="stylesheet" href="../stylesheets/payment.css">
</head>

<body>
<div class="wrap">
    <!-- CỘT TRÁI -->
    <div class="left">
        <!-- Logo + breadcrumb -->
        <div class="text-start mb-4">
            <img src="../image/dronefooter.png" alt="Logo" height="100">
            <nav class="breadcrumb mt-2">
                <a href="shoppingcart.html">Giỏ hàng</a> &nbsp;>&nbsp;
                <a href="delivery-info.html">Thông tin giao hàng</a> &nbsp;>&nbsp;
                <span class="current">Phương thức thanh toán</span>
            </nav>
        </div>

        <h5 class="mb-4 fw-bold">Phương Thức Thanh Toán</h5>

        <!-- FORM THANH TOÁN -->
        <form id="paymentForm">
            <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="payment" id="cod" value="cod" required>
                <label class="form-check-label" for="cod">
                    <i class="bi bi-cash-coin me-2 text-success"></i> Thanh toán khi giao hàng (Tiền mặt)
                </label>
            </div>

            <div class="form-check mb-4">
                <input class="form-check-input" type="radio" name="payment" id="vnpay" value="vnpay">
                <label class="form-check-label" for="vnpay">
                    <i class="bi bi-credit-card-2-front me-2 text-primary"></i> Thanh toán qua VNPAY
                </label>
            </div>

            <!-- 1 nút duy nhất -->
            <a href="#" id="btnHoanTat" class="btn btn-primary w-100">Hoàn tất đơn hàng</a>
        </form>
    </div>

    <!-- CỘT PHẢI -->
    <div class="right">
        <h5 class="fw-bold mb-4">Đơn hàng của bạn</h5>

        <div class="d-flex align-items-center mb-3">
            <img src="../image/productt/DJIMavic3_3.png" alt="Mavic3" width="60" class="me-3 prod-img">
            <div>
                <p class="mb-0 fw-semibold">DJI Mavic 3 Nhập Khẩu Chính Hãng Fullbox</p>
                <small class="text-muted">Số lượng: 1</small>
            </div>
            <span class="ms-auto fw-semibold">8,990,000₫</span>
        </div>

        <div class="d-flex align-items-center mb-3">
            <img src="../image/productt/Flycam_DJI_Flip .png" alt="Flycam" width="60" class="me-3 prod-img">
            <div>
                <p class="mb-0 fw-semibold">Flycam DJI Flip Chính Hãng Fullbox</p>
                <small class="text-muted">Số lượng: 2</small>
            </div>
            <span class="ms-auto fw-semibold">4,888,000₫</span>
        </div>

        <div class="d-flex justify-content-between">
            <span>Tạm tính</span><span>18,762,000₫</span>
        </div>
        <div class="d-flex justify-content-between mb-2">
            <span>Phí vận chuyển</span><span>Miễn phí</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between fw-bold total">
            <span>Tổng cộng</span><span>18,762,000₫</span>
        </div>
    </div>
</div>

<!-- POPUP GIẢ LẬP VNPAY -->
<div class="vnpay-popup" id="vnpayPopup" style="display:none;">
    <div class="vnpay-box">
        <div class="text-center mb-3">
            <img src="https://tse3.mm.bing.net/th/id/OIP.kklIaX3TV97u5KnjU_Kr4wHaHa?rs=1&pid=ImgDetMain&o=7&rm=3"
                 height="40" alt="VNPAY logo">
            <h5 class="mt-3">Chọn phương thức thanh toán</h5>
        </div>
        <div class="vnpay-option">
            Ứng dụng thanh toán hỗ trợ VNPAYQR
            <img src="https://sandbox.vnpayment.vn/paymentv2/images/icons/qr.svg" alt="">
        </div>
        <div class="vnpay-option">
            Thẻ nội địa và tài khoản ngân hàng
            <img src="https://sandbox.vnpayment.vn/paymentv2/images/icons/bank.svg" alt="">
        </div>
        <div class="vnpay-option">
            Thẻ thanh toán quốc tế
            <img src="https://sandbox.vnpayment.vn/paymentv2/images/icons/visa.svg" alt="">
        </div>
        <div class="vnpay-option">
            Ví điện tử VNPAY
            <img src="https://sandbox.vnpayment.vn/paymentv2/images/icons/vnpay-wallet.svg" alt="">
        </div>
        <div class="text-center mt-3">
            <a href="personal-page.html" class="btn btn-success me-2">Xác nhận thanh toán</a>
            <a href="#" class="btn btn-outline-secondary" id="cancelVNPAY">Hủy</a>
        </div>
    </div>
</div>

<!-- Script chỉ để bật/tắt popup -->
<script>
    const btnHoanTat = document.getElementById('btnHoanTat');
    const popup = document.getElementById('vnpayPopup');
    const cancelVNPAY = document.getElementById('cancelVNPAY');

    btnHoanTat.addEventListener('click', (e) => {
        const payment = document.querySelector('input[name="payment"]:checked');
        if (!payment) {
            alert('Vui lòng chọn phương thức thanh toán!');
            e.preventDefault();
            return;
        }

        if (payment.value === 'vnpay') {
            e.preventDefault(); // không chuyển trang
            popup.style.display = 'flex'; // bật popup
        } else {
            // COD: cho phép thẻ <a> hoạt động tự nhiên (chuyển trang)
            btnHoanTat.setAttribute('href', 'personal-page.html');
        }
    });

    cancelVNPAY.addEventListener('click', (e) => {
        e.preventDefault();
        popup.style.display = 'none';
    });
</script>
</body>
</html>
